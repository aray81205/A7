{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/User/alphacamp/todolist-react-starter/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/User/alphacamp/todolist-react-starter/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/User/alphacamp/todolist-react-starter/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{AuthContainer,AuthInputContainer,AuthButton,AuthLinkText}from'components/common/auth.styled';import{ACLogoIcon}from'assets/images';import{AuthInput}from'components';import{useState,useEffect}from'react';import{Link,useNavigate}from'react-router-dom';import Swal from'sweetalert2';import{useAuth}from'../Contexts/AuthContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginPage=function LoginPage(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var navigate=useNavigate();var _useAuth=useAuth(),login=_useAuth.login,isAuthenticated=_useAuth.isAuthenticated;var handleClick=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var success;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(username.length===0)){_context.next=2;break;}return _context.abrupt(\"return\");case 2:if(!(password.length===0)){_context.next=4;break;}return _context.abrupt(\"return\");case 4:_context.next=6;return login({username:username,password:password});case 6:success=_context.sent;if(!success){_context.next=10;break;}Swal.fire({position:'top',title:'登入成功！',timer:1000,icon:'success',showConfirmButton:false});return _context.abrupt(\"return\");case 10:Swal.fire({position:'top',title:'登入失敗！',timer:1000,icon:'error',showConfirmButton:false});case 11:case\"end\":return _context.stop();}},_callee);}));return function handleClick(){return _ref.apply(this,arguments);};}();useEffect(function(){if(isAuthenticated){navigate('/todos');}},[navigate,isAuthenticated]);return/*#__PURE__*/_jsxs(AuthContainer,{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(ACLogoIcon,{})}),/*#__PURE__*/_jsx(\"h1\",{children:\"\\u767B\\u5165 Todo\"}),/*#__PURE__*/_jsx(AuthInputContainer,{children:/*#__PURE__*/_jsx(AuthInput,{label:\"\\u5E33\\u865F\",placeholder:\"\\u8ACB\\u8F38\\u5165\\u5E33\\u865F\",value:username,onChange:function onChange(nameInputValue){return setUsername(nameInputValue);}})}),/*#__PURE__*/_jsx(AuthInputContainer,{children:/*#__PURE__*/_jsx(AuthInput,{type:\"password\",label:\"\\u5BC6\\u78BC\",placeholder:\"\\u8ACB\\u8F38\\u5165\\u5BC6\\u78BC\",value:password,onChange:function onChange(passwordInputValue){return setPassword(passwordInputValue);}})}),/*#__PURE__*/_jsx(AuthButton,{onClick:handleClick,children:\"\\u767B\\u5165\"}),/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:/*#__PURE__*/_jsx(AuthLinkText,{children:\"\\u8A3B\\u518A\"})})]});};export default LoginPage;","map":{"version":3,"names":["AuthContainer","AuthInputContainer","AuthButton","AuthLinkText","ACLogoIcon","AuthInput","useState","useEffect","Link","useNavigate","Swal","useAuth","jsx","_jsx","jsxs","_jsxs","LoginPage","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","password","setPassword","navigate","_useAuth","login","isAuthenticated","handleClick","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","success","wrap","_callee$","_context","prev","next","length","abrupt","sent","fire","position","title","timer","icon","showConfirmButton","stop","apply","arguments","children","label","placeholder","value","onChange","nameInputValue","type","passwordInputValue","onClick","to"],"sources":["C:/Users/User/alphacamp/todolist-react-starter/src/pages/LoginPage.jsx"],"sourcesContent":["import {\r\n  AuthContainer,\r\n  AuthInputContainer,\r\n  AuthButton,\r\n  AuthLinkText,\r\n} from 'components/common/auth.styled';\r\nimport { ACLogoIcon } from 'assets/images';\r\nimport { AuthInput } from 'components';\r\nimport { useState, useEffect } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport Swal from 'sweetalert2';\r\nimport { useAuth } from '../Contexts/AuthContext';\r\n\r\nconst LoginPage = () => {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  const { login, isAuthenticated } = useAuth();\r\n\r\n  const handleClick = async () => {\r\n    if (username.length === 0) {\r\n      return;\r\n    }\r\n    if (password.length === 0) {\r\n      return;\r\n    }\r\n\r\n    const success = await login({\r\n      username,\r\n      password,\r\n    });\r\n    if (success) {\r\n      Swal.fire({\r\n        position: 'top',\r\n        title: '登入成功！',\r\n        timer: 1000,\r\n        icon: 'success',\r\n        showConfirmButton: false,\r\n      });\r\n      return;\r\n    }\r\n    Swal.fire({\r\n      position: 'top',\r\n      title: '登入失敗！',\r\n      timer: 1000,\r\n      icon: 'error',\r\n      showConfirmButton: false,\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isAuthenticated) {\r\n      navigate('/todos');\r\n    }\r\n  }, [navigate, isAuthenticated]);\r\n\r\n  return (\r\n    <AuthContainer>\r\n      <div>\r\n        <ACLogoIcon />\r\n      </div>\r\n      <h1>登入 Todo</h1>\r\n\r\n      <AuthInputContainer>\r\n        <AuthInput\r\n          label=\"帳號\"\r\n          placeholder=\"請輸入帳號\"\r\n          value={username}\r\n          onChange={(nameInputValue) => setUsername(nameInputValue)}\r\n        />\r\n      </AuthInputContainer>\r\n\r\n      <AuthInputContainer>\r\n        <AuthInput\r\n          type=\"password\"\r\n          label=\"密碼\"\r\n          placeholder=\"請輸入密碼\"\r\n          value={password}\r\n          onChange={(passwordInputValue) => setPassword(passwordInputValue)}\r\n        />\r\n      </AuthInputContainer>\r\n      <AuthButton onClick={handleClick}>登入</AuthButton>\r\n      <Link to=\"/signup\">\r\n        <AuthLinkText>註冊</AuthLinkText>\r\n      </Link>\r\n    </AuthContainer>\r\n  );\r\n};\r\n\r\nexport default LoginPage;\r\n"],"mappings":"4ZAAA,OACEA,aAAa,CACbC,kBAAkB,CAClBC,UAAU,CACVC,YAAY,KACP,+BAA+B,CACtC,OAASC,UAAU,KAAQ,eAAe,CAC1C,OAASC,SAAS,KAAQ,YAAY,CACtC,OAASC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CACpD,MAAO,CAAAC,IAAI,KAAM,aAAa,CAC9B,OAASC,OAAO,KAAQ,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAElD,GAAM,CAAAC,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAA,CAAS,CACtB,IAAAC,SAAA,CAAgCX,QAAQ,CAAC,EAAE,CAAC,CAAAY,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAArCG,QAAQ,CAAAF,UAAA,IAAEG,WAAW,CAAAH,UAAA,IAC5B,IAAAI,UAAA,CAAgChB,QAAQ,CAAC,EAAE,CAAC,CAAAiB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAArCE,QAAQ,CAAAD,UAAA,IAAEE,WAAW,CAAAF,UAAA,IAC5B,GAAM,CAAAG,QAAQ,CAAGjB,WAAW,CAAC,CAAC,CAE9B,IAAAkB,QAAA,CAAmChB,OAAO,CAAC,CAAC,CAApCiB,KAAK,CAAAD,QAAA,CAALC,KAAK,CAAEC,eAAe,CAAAF,QAAA,CAAfE,eAAe,CAE9B,GAAM,CAAAC,WAAW,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,OAAA,QAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,cACdrB,QAAQ,CAACsB,MAAM,GAAK,CAAC,GAAAH,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAI,MAAA,uBAGrBnB,QAAQ,CAACkB,MAAM,GAAK,CAAC,GAAAH,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAI,MAAA,kBAAAJ,QAAA,CAAAE,IAAA,SAIH,CAAAb,KAAK,CAAC,CAC1BR,QAAQ,CAARA,QAAQ,CACRI,QAAQ,CAARA,QACF,CAAC,CAAC,QAHIY,OAAO,CAAAG,QAAA,CAAAK,IAAA,KAITR,OAAO,EAAAG,QAAA,CAAAE,IAAA,WACT/B,IAAI,CAACmC,IAAI,CAAC,CACRC,QAAQ,CAAE,KAAK,CACfC,KAAK,CAAE,OAAO,CACdC,KAAK,CAAE,IAAI,CACXC,IAAI,CAAE,SAAS,CACfC,iBAAiB,CAAE,KACrB,CAAC,CAAC,CAAC,OAAAX,QAAA,CAAAI,MAAA,mBAGLjC,IAAI,CAACmC,IAAI,CAAC,CACRC,QAAQ,CAAE,KAAK,CACfC,KAAK,CAAE,OAAO,CACdC,KAAK,CAAE,IAAI,CACXC,IAAI,CAAE,OAAO,CACbC,iBAAiB,CAAE,KACrB,CAAC,CAAC,CAAC,yBAAAX,QAAA,CAAAY,IAAA,MAAAhB,OAAA,GACJ,kBA7BK,CAAAL,WAAWA,CAAA,SAAAC,IAAA,CAAAqB,KAAA,MAAAC,SAAA,OA6BhB,CAED9C,SAAS,CAAC,UAAM,CACd,GAAIsB,eAAe,CAAE,CACnBH,QAAQ,CAAC,QAAQ,CAAC,CACpB,CACF,CAAC,CAAE,CAACA,QAAQ,CAAEG,eAAe,CAAC,CAAC,CAE/B,mBACEd,KAAA,CAACf,aAAa,EAAAsD,QAAA,eACZzC,IAAA,QAAAyC,QAAA,cACEzC,IAAA,CAACT,UAAU,GAAE,CAAC,CACX,CAAC,cACNS,IAAA,OAAAyC,QAAA,CAAI,mBAAO,CAAI,CAAC,cAEhBzC,IAAA,CAACZ,kBAAkB,EAAAqD,QAAA,cACjBzC,IAAA,CAACR,SAAS,EACRkD,KAAK,CAAC,cAAI,CACVC,WAAW,CAAC,gCAAO,CACnBC,KAAK,CAAErC,QAAS,CAChBsC,QAAQ,CAAE,SAAAA,SAACC,cAAc,QAAK,CAAAtC,WAAW,CAACsC,cAAc,CAAC,EAAC,CAC3D,CAAC,CACgB,CAAC,cAErB9C,IAAA,CAACZ,kBAAkB,EAAAqD,QAAA,cACjBzC,IAAA,CAACR,SAAS,EACRuD,IAAI,CAAC,UAAU,CACfL,KAAK,CAAC,cAAI,CACVC,WAAW,CAAC,gCAAO,CACnBC,KAAK,CAAEjC,QAAS,CAChBkC,QAAQ,CAAE,SAAAA,SAACG,kBAAkB,QAAK,CAAApC,WAAW,CAACoC,kBAAkB,CAAC,EAAC,CACnE,CAAC,CACgB,CAAC,cACrBhD,IAAA,CAACX,UAAU,EAAC4D,OAAO,CAAEhC,WAAY,CAAAwB,QAAA,CAAC,cAAE,CAAY,CAAC,cACjDzC,IAAA,CAACL,IAAI,EAACuD,EAAE,CAAC,SAAS,CAAAT,QAAA,cAChBzC,IAAA,CAACV,YAAY,EAAAmD,QAAA,CAAC,cAAE,CAAc,CAAC,CAC3B,CAAC,EACM,CAAC,CAEpB,CAAC,CAED,cAAe,CAAAtC,SAAS"},"metadata":{},"sourceType":"module"}